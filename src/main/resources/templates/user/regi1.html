<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/asset/css/regi.css">
    <link rel="stylesheet" href="/asset/css/header.css">
    <link rel="stylesheet" href="/asset/css/footer.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
          rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        /*서비스 신청 목록 네비게이션*/
        .menu03{
            display: none!important;
        }
    </style>
</head>

<body data-aos-easing="ease" data-aos-duration="400" data-aos-delay="0">
<header th:replace="header.html"></header>
<div id="root">
    <div id="app-container" class="app-container">

        <div class="main-area">
            <div class="sc-dRCTWM bvYJlY">
                <div class="sc-hzNEM iKMJbd">
                    <div class="register-container">
                        <div class="inner-container">
                            <div class="register-form">
                                <div class="title-wrapper">
                                    <span>1/2</span>
                                    <p>회원가입</p>
                                </div>
                                <div class="form">
                                    <form method="post" action="/user/regi1" id="joinForm1" name="joinForm1">
                                        <div class="form snd"><label>이름</label><input name="userName" type="text" placeholder="ex. 홍길동"
                                                                                      class="ant-input sc-jzJRlG iaafvp"
                                                                                      value="">
                                            <div class="sc-VigVT dUXpIL"></div>
                                            <label>성별</label>
                                            <div class="type-button-wrapper">
                                                <div id="M" class="type-button div2 clicked" name="userGender" >남자</div>
                                                <div id="W" class="type-button div2" name="userGender" >여자</div>
                                                <input type="hidden" name="userGender">
                                            </div>
                                            <div class="sc-VigVT dUXpIL"></div>
                                            <div>
                                                <label for="userBirth">생년월일</label><input name="userBirth" type="text" id="userBirth"
                                                                          maxlength="8" placeholder="숫자만 입력해주세요 (ex. 19880320)"
                                                                          class="ant-input sc-jzJRlG iaafvp" value="">
                                                <div class="check_font" id="birth_check"></div>
                                            </div>
                                            <div class="form fst"><label>이메일</label>
                                                <div><input name="userEmail" type="email" id="emailCheck" required="" placeholder="ex) example@mail.com"
                                                            class="ant-input sc-jzJRlG iaafvp" oninput="check_email()" value=""
                                                            style="width: 100%">
                                                </div>
                                            </div>
                                            <!--email 중복체크-->
                                            <span class="email_ok">사용 가능한 이메일입니다.</span>
                                            <span class="email_already">이미 가입한 이메일입니다.</span>
                                            <span class="email_not">올바른 이메일 형식이 아닙니다.</span>
                                            <div class="sc-VigVT ffyjKW"></div>
                                            <div class="sc-cooIXK fRCQoH">
                                                <input type="checkbox" id="join_check" name="join_check"> <label>&nbsp;&nbsp; 서비스 이용 약관 및 개인 정보 처리 방침 동의</label>
                                            </div>
                                            <p class="sc-gmeYpB bwhqaA" id="btn-modal" >이용약관 확인하기</p>
                                            <!--모달-->
                                            <div id="modal" class="modal-overlay">
                                                <div class="modal-window">
                                                    <div class="title">
                                                        <p>이용약관 확인</p>
                                                    </div>
                                                    <div class="close-area">X</div>
                                                    <div class="context-block">
                                                        <h3>제 1조(목적)</h3>
                                                        <p>본 약관은 ㈜블루카멜(이하 “회사”라 한다)가 제공하는 돌보미 병원 동행 서비스와 관련하여 회사와 회원과의 권리,</p>
                                                        <p>의무 및 책임 사항, 그리고 기타 필요한 사항을 규정함을 목적으로 합니다.</p>
                                                        <p>본 서비스 이용약관은 2021년 12월 20일부터 시행됩니다.</p>
                                                    </div>
                                                    <div class="context-block">
                                                        <h3>제 2조(정의)</h3>
                                                        <h5>1. 본 약관에서 사용하는 용어의 정의는 다음과 같습니다.</h5>
                                                        <div class="info">
                                                        <p class="title">“돌보미 서비스” 혹은 “서비스”라 함은 당사가 제공하는 ‘병원 동행 서비스’를 의미합니다.</p>
                                                        <p class="title">“회원”이라 함은 회사가 제공하는 서비스를 이용하기 위하여 본 약관에 동의하고 회사의 회원으로 가입하는 자를 말합니다. (단, 메니저와 관련된 사실 관계에 한하여, 메니저도 본 약관에서 “회원”에 포함될 수 있습니다)</p>
                                                        <p class="title">“메니저”라 함은 회사가 회원에게 서비스를 제공하기 위해 직접 선별하고 교육하여 ‘프리랜서’의 형태로 간접 고용한 인원을 말합니다.</p>
                                                        <p class="title">“운송사업자"라 함은 여객자동차 운수사업법 제4조에 따른 면허를 받은 여객자동차 운송사업자로서, 회사(메이트 인력)의 중개 또는 회원 스스로를 통해 택시 등 그 면허를 받은 운송 수단을 이용하여 운송서비스를 제공하는 자를 의미합니다.</p>
                                                        <p class="title">“매칭”이라 함은 회원이 플랫폼(웹사이트 포함)에서 출발지와 목적지를 입력하고, “예약하기" 버튼을 통해 서비스 이용을 요청(이하 “이용 요청”이라고 합니다)하면, 요청 시점에 서비스 제공이 가능한 메이트가 플랫폼(웹사이트 포함)을 통하여 수락함으로써(매칭됨으로써), 회원과 회사 사이의 메이트 알선 계약 및 회원과 운송사업자 간의 운송 계약이 각 체결된 상태를 의미합니다.</p>
                                                        <p class="title">“플랫폼(웹사이트 포함)”이라 함은 회사가 회원에게 서비스를 제공하기 위하여 개발한 위드메이트 애플리케이션과 웹사이트를 의미합니다.</p>
                                                        <p class="title">“이용요금”이라 함은
                                                        <br>
                                                        (i) 메이트가 제공하는 의료 동행 서비스에 대한 비용
                                                        <br>
                                                        (ii) 회원이 택시 등 운송사업자의 운송 수단을 예약하거나 호출하여 이동하는 비용,
                                                        <br>
                                                            (iii) 기타 비용(고객 소유 자가용 대리 운전 비용, 예약 취소 및 변경 수수료 등)을 총칭하여 의미합니다.</p>
                                                        </div>
                                                    <h5 style="margin-top: 56px;">
                                                        2. 본 약관에서 사용하는 용어의 정의는 본 조제 1항에서 정하는 것을 제외하고는 관계 법령에서 정하는 바에 의합니다. 관계 법령에서 정하지 않는 것은 일반적인 상 관례에 의합니다.
                                                    </h5>
                                                    </div>
                                                </div>
                                            </div>
                                            <p class="sc-gmeYpB bwhqaA" id="btn-modal">개인정보 처리방침 확인하기</p>
                                            <div class="sc-VigVT dUXpIL"></div>
                                            <button type="button"
                                                    class="ant-btn ant-btn-primary"
                                                    style="background-color: #3bc1ff; border: 0px; cursor: pointer;" onclick="regi1Confirm()">
                                                <span>계속하기</span></button>
                                            <div class="link-wrapper"><span class="text">매니저 신청을 희망하시나요? </span><span
                                                    class="link" onclick="location.href='/member/managerapply'">매니저 신청하기</span>
                                            </div>
                                            <div class="link-wrapper"><span class="text">이미 계정이 있으신가요? </span><span
                                                    class="link" onclick="location.href='/member/userlogin'">로그인</span></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
</div>
<footer th:replace="footer.html"></footer>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>

    const loremIpsum = document.getElementById("lorem-ipsum")
    fetch("https://baconipsum.com/api/?type=all-meat&paras=200&format=html")
        .then(response => response.text())
        .then(result => loremIpsum.innerHTML = result)

    const modal = document.getElementById("modal")
    const btnModal = document.getElementById("btn-modal")
    btnModal.addEventListener("click", e => {
        modal.style.display = "flex"
    })

    const closeBtn = modal.querySelector(".close-area")
    closeBtn.addEventListener("click", e => {
        modal.style.display = "none"
    })

    modal.addEventListener("click", e => {
        const evTarget = e.target
        if(evTarget.classList.contains("modal-overlay")) {
            modal.style.display = "none"
        }
    })

    window.addEventListener("keyup", e => {
        if(modal.style.display === "flex" && e.key === "Escape") {
            modal.style.display = "none"
        }
    })

    let $userGender = $("input[name='userGender']")
    /*유효성 검사 */
    function regi1Confirm(){
        var $userName = $("input[name='userName']");
        var $userBirth = $("input[name='userBirth']");
        var $userEmail = $("input[name='userEmail']");
        var $joinForm1 = $(joinForm1);

        if(!$userName.val()){
            alert("이름을 입력해 주세요");
            $userName.focus();
            console.log("들어옴")
            return false;
        }

        if(!$userBirth.val()){
            alert("생년월일을 입력해 주세요");
            $userBirth.focus();
            return false;
        }

        if(!$userEmail.val()){
            alert("이메일을 입력해 주세요");
            $userEmail.focus();
            return false;
        }

        if (!join_check.checked) {
            alert("서비스 이용약관 및 개인 정보 처리 방침에 동의해 주세요");
            join_check.focus();
            return false;
        }
        $joinForm1.submit();

    }

    $("#btnLogin").click(function () {
        if (!$(this).attr('class').match('on')) {
            $(this).addClass('on');
            $(".fnc_user_wrap").addClass('on');
        } else {
            $(this).removeClass('on');
            $(".fnc_user_wrap").removeClass('on');
        }
    })

    /* 성별 버튼 클릭 */
    // function change_btn(e) {
    //     var btns = document.querySelectorAll(".type-button");
    //     btns.forEach(function(btn, i) {
    //         if(e.currentTarget == btn) {
    //             btn.classList.add("active");
    //         }
    //         else {
    //             btn.classList.remove("active");
    //         }
    //     });
    //     console.log( e.currentTarget );
    // }

    var div2 = document.getElementsByClassName("div2");

    function handleClick(event) {
        console.log(event.target);
        // console.log(this);
        // 콘솔창을 보면 둘다 동일한 값이 나온다

        console.log(event.target.classList);

        if (event.target.classList[1] === "clicked") {
            event.target.classList.remove("clicked");
        } else {
            for (var i = 0; i < div2.length; i++) {
                div2[i].classList.remove("clicked");
            }

            event.target.classList.add("clicked");
            $userGender.val(event.target.id);
        }
    }

    function init() {
        for (var i = 0; i < div2.length; i++) {
            div2[i].addEventListener("click", handleClick);
        }
    }

    init();

    /*/!*이메일 정규식*!/
    var emailRule = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;//이메일 정규식

    if(!emailRule.test($("input[id='emailCheck']").val())) {
        //경고
    }
*/

    /*이메일 중복검사*/
    function check_email() {
        var email = $('#emailCheck').val();
        var emailRule = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;//이메일 정규식

        $.ajax({
            url:'/user/emailcheck/',
            type:'post',
            data:{userEmail:email},
            success:function (cnt) {
                if(cnt == 0){
                    if(!emailRule.test(email)) {
                        //경고
                        $('.email_not').css("display", "inline-block");
                        $('.email_ok').css("display", "none");
                        $('.email_already').css("display", "none");
                    }else{
                        $('.email_not').css("display", "none");
                        $('.email_ok').css("display", "inline-block");
                        $('.email_already').css("display", "none");
                    }

                }else{
                    $('.email_already').css("display", "inline-block");
                    $('.email_ok').css("display","none");
                    $('.email_not').css("display", "none");
                }
            },
            error:function () {
            }
        });
    };

    // 생일 유효성 검사
    var birthJ = false;

    // 생년월일	birthJ 유효성 검사
    $('#userBirth').blur(function(){
        var dateStr = $(this).val();
        var year = Number(dateStr.substr(0,4)); // 입력한 값의 0~4자리까지 (연)
        var month = Number(dateStr.substr(4,2)); // 입력한 값의 4번째 자리부터 2자리 숫자 (월)
        var day = Number(dateStr.substr(6,2)); // 입력한 값 6번째 자리부터 2자리 숫자 (일)
        var today = new Date(); // 날짜 변수 선언
        var yearNow = today.getFullYear(); // 올해 연도 가져옴

        if (dateStr.length <=8) {
            // 연도의 경우 1900 보다 작거나 yearNow 보다 크다면 false를 반환합니다.
            if (1900 > year || year > yearNow){

                $('#birth_check').text('생년월일을 확인해주세요 :)');
                $('#birth_check').css('color', 'red');

            }else if (month < 1 || month > 12) {

                $('#birth_check').text('생년월일을 확인해주세요 :)');
                $('#birth_check').css('color', 'red');

            }else if (day < 1 || day > 31) {

                $('#birth_check').text('생년월일을 확인해주세요 :)');
                $('#birth_check').css('color', 'red');

            }else if ((month==4 || month==6 || month==9 || month==11) && day==31) {

                $('#birth_check').text('생년월일을 확인해주세요 :)');
                $('#birth_check').css('color', 'red');

            }else if (month == 2) {

                var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));

                if (day>29 || (day==29 && !isleap)) {

                    $('#birth_check').text('생년월일을 확인해주세요 :)');
                    $('#birth_check').css('color', 'red');

                }else{
                    $('#birth_check').text('');
                    birthJ = true;
                }//end of if (day>29 || (day==29 && !isleap))

            }else{

                $('#birth_check').text('');
                birthJ = true;
            }//end of if

        }else{
            //1.입력된 생년월일이 8자 초과할때 :  auth:false
            $('#birth_check').text('생년월일을 확인해주세요 :)');
            $('#birth_check').css('color', 'red');
        }
    }); //End of method /*



</script>
</html>